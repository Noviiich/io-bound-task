# I/O Bound Tasks

---

## Обзор

Сервис управления I/O bound задачами — это **RESTful API**, написанный на **Go**, предназначенный для создания, получения статуса и удаления задач, которые имитируют длительные I/O операции. Каждая задача выполняется в течение **3–5 минут**. Все данные хранятся в памяти с использованием конкурентно-безопасной структуры (`map` с `sync.RWMutex`), без зависимости от внешних сервисов, таких как базы данных или очереди сообщений.

Приложение спроектировано с учетом **принципов чистой архитектуры**, разделяя логику на слои: **доставка** (HTTP-обработчики), **сервис** (управление задачами), **хранение**(Память приложения) и **сущности** (модель задачи). Код модульный и готов к расширению, чтобы другие разработчики могли легко добавлять новые типы задач или функциональность.

### Основные возможности:

* **Создание** новой задачи, которая выполняется 3–5 минут.
* **Получение** статуса задачи, включая время создания и текущую/итоговую продолжительность выполнения.
* **Удаление** задачи по идентификатору.
* Хранение данных **в памяти** с конкурентной безопасностью.
* Эмуляция I/O bound операции через реализацию дополнительно функции для эмуляции.
* Поддержка **расширяемости** для добавления новых типов задач.

---

## Быстрый старт

Следуйте этим шагам, чтобы настроить и запустить проект локально.

### 1. Клонирование репозитория

```bash
git clone https://github.com/Noviiich/io-bound-task.git
cd io-bound-task
```

### Установка зависимости

```bash
go mod tidy
```


### Запуск приложения

```bash
go run cmd/main.go --config="./config/local.yaml"
```
Сервер будет доступен по адресу http://localhost:8080


### API-эндпоинты
API поддерживает следующие эндпоинты:
| Метод    | Эндпоинт                | Описание                     | Параметры запроса   |    Тело запроса       |
|----------|------------------------ |------------------------------|---------------------|-----------------------|
|  `POST`  |      `/tasks`           | Создать новую task           |         -           |          name         |
|  `GET`   |     `/tasks/<id>`       | Получить статус задачи по ID |         -           |          -            |
| `DELETE` |   `/tasks/<id>`         | Удалить task по ID           |         -           |          -            |


### Формат ответа GET /task/<id>

```json
{
    "id": "8608dc81-5ab8-4bce-b60d-224281e3937b",
    "name": "test2",
    "status": "running",
    "created_at": "2025-06-22T12:25:02.4891036+03:00",
    "started_at": "2025-06-22T12:25:12.4901336+03:00",
    "duration": "12.696278s"
}
```
* `id`: Уникальный идентификатор задачи (UUID).
* `name`: Имя задачи.
* `status`: Состояние задачи (pending, running, completed, canceled, deleted).
* `created_at`: Время создания задачи.
* `duration`: Продолжительность выполнения:


### Примеры запросов с curl

1. Создать задачу
```bash
curl -X POST -H "Content-Type:application/json" -d '{"name": "test2"}' http://localhost:8080/tasks
```

#### Пример ответа:
```json
{
    "id": "8608dc81-5ab8-4bce-b60d-224281e3937b",
    "status": "pending"
}
```

2. Получить статус задачи
```bash
curl -H "Content-Type:application/json" http://localhost:8080/tasks/8608dc81-5ab8-4bce-b60d-224281e3937b
```

#### Пример ответа (для pending):
```json
{
    "id": "8608dc81-5ab8-4bce-b60d-224281e3937b",
    "name": "test2",
    "status": "pending",
    "created_at": "2025-06-22T12:25:02.4891036+03:00"
}
```

#### Пример ответа (для running):
```json
{
    "id": "8608dc81-5ab8-4bce-b60d-224281e3937b",
    "name": "test2",
    "status": "running",
    "created_at": "2025-06-22T12:25:02.4891036+03:00",
    "started_at": "2025-06-22T12:25:12.4901336+03:00",
    "duration": "12.696278s"
}
```

3. Удалить задачу
```bash
curl -X DELETE -H "Content-Type:application/json" http://localhost:8080/tasks/8608dc81-5ab8-4bce-b60d-224281e3937b
```

#### Пример ответа:
```json
{
    "status": "deleted",
    "id": "89510b0d-fd19-4bce-87f4-4c18f2f327f2"
}
```

#### Пример ответа (для cancelled):
```json
{
    "id": "89510b0d-fd19-4bce-87f4-4c18f2f327f2",
    "name": "test2",
    "status": "cancelled",
    "created_at": "2025-06-22T12:28:40.7143243+03:00",
    "started_at": "2025-06-22T12:28:50.7149508+03:00",
    "completed_at": "2025-06-22T12:29:00.0836418+03:00",
    "duration": "9.368691s"
}
```